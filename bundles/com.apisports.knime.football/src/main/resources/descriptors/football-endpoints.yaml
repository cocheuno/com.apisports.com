version: "1.0"
sport: football

endpoints:
  # ==========================================
  # COMPETITIONS (Leagues & Seasons)
  # ==========================================
  - id: leagues_all
    path: /leagues
    category: Competitions
    description: Get all available leagues
    keywords: [competitions, tournaments]

    params:
      - name: country
        type: string
        required: false
        description: Filter by country name (e.g., England, Spain)

      - name: season
        type: integer
        required: false
        description: Filter by season year
        min: 2000
        max: 2030

      - name: type
        type: enum
        required: false
        description: League type filter
        enum: [league, cup]
        enumLabels: [League, Cup]

    validation:
      requiredParams: []

    paging:
      supported: false

    caching:
      policy: reference
      ttl: 86400
      description: Leagues are relatively static, updated daily

    response:
      rootPath: response
      type: array
      flatten:
        prefix: ""
        nestedObjects:
          - path: league
            strategy: flatten
            prefix: league_
          - path: country
            strategy: flatten
            prefix: country_
          - path: seasons
            strategy: json
        renameColumns:
          - from: league_id
            to: League ID
          - from: league_name
            to: League Name
          - from: country_name
            to: Country

    metadata:
      apiTier: free
      quotaWeight: 1

    examples:
      - title: Get all English leagues
        params:
          country: England

  # ==========================================
  # FIXTURES
  # ==========================================
  - id: fixtures_by_league
    path: /fixtures
    category: Fixtures
    description: Get fixtures for a specific league and season
    keywords: [matches, games, schedule]

    params:
      - name: league
        type: integer
        required: false
        description: League ID (e.g., 39 for Premier League)
        min: 1

      - name: season
        type: integer
        required: false
        description: Season year (e.g., 2024)
        min: 2000
        max: 2030

      - name: team
        type: integer
        required: false
        description: Filter by team ID
        min: 1

      - name: date
        type: string
        required: false
        description: Filter by date (YYYY-MM-DD)
        pattern: "^\\d{4}-\\d{2}-\\d{2}$"

      - name: from
        type: string
        required: false
        description: Date range start (YYYY-MM-DD)
        pattern: "^\\d{4}-\\d{2}-\\d{2}$"

      - name: to
        type: string
        required: false
        description: Date range end (YYYY-MM-DD)
        pattern: "^\\d{4}-\\d{2}-\\d{2}$"

      - name: status
        type: enum
        required: false
        description: Match status filter
        enum: [TBD, NS, "1H", HT, "2H", ET, P, FT, AET, PEN, BT, SUSP, INT, PST, CANC, ABD, AWD, WO]
        enumLabels: [Time to be defined, Not Started, First Half, Halftime, Second Half, Extra Time, Penalty, Match Finished, After Extra Time, Penalties Finished, Break Time, Match Suspended, Match Interrupted, Match Postponed, Match Cancelled, Match Abandoned, Match Awarded, Match Walkover]

    validation:
      requiresAtLeastOneOf: [league, team, date, from]

    paging:
      supported: false

    caching:
      policy: live
      ttl: 300
      description: Fixtures change frequently (lineups, status updates)

    response:
      rootPath: response
      type: array
      flatten:
        prefix: ""
        nestedObjects:
          - path: fixture
            strategy: flatten
            prefix: fixture_
          - path: league
            strategy: flatten
            prefix: league_
          - path: teams.home
            strategy: flatten
            prefix: home_team_
          - path: teams.away
            strategy: flatten
            prefix: away_team_
          - path: goals
            strategy: flatten
            prefix: goals_
          - path: score
            strategy: json
        nestedArrays:
          - path: events
            strategy: stringify
          - path: lineups
            strategy: stringify

    metadata:
      apiTier: free
      quotaWeight: 1

    examples:
      - title: Get all Premier League fixtures for 2024 season
        params:
          league: 39
          season: 2024

  # ==========================================
  # TEAMS
  # ==========================================
  - id: teams_by_league
    path: /teams
    category: Teams
    description: Get all teams for a specific league and season
    keywords: [clubs, squads]

    params:
      - name: league
        type: integer
        required: true
        description: League ID
        min: 1

      - name: season
        type: integer
        required: true
        description: Season year
        min: 2000
        max: 2030

    validation:
      requiredParams: [league, season]

    paging:
      supported: false

    caching:
      policy: reference
      ttl: 86400
      description: Team rosters updated daily

    response:
      rootPath: response
      type: array
      flatten:
        prefix: ""
        nestedObjects:
          - path: team
            strategy: flatten
            prefix: team_
          - path: venue
            strategy: flatten
            prefix: venue_

    metadata:
      apiTier: free
      quotaWeight: 1

    examples:
      - title: Get all Premier League teams for 2024
        params:
          league: 39
          season: 2024

  # ==========================================
  # STANDINGS
  # ==========================================
  - id: standings_by_league
    path: /standings
    category: Standings
    description: Get league standings/table
    keywords: [table, rankings, positions]

    params:
      - name: league
        type: integer
        required: true
        description: League ID
        min: 1

      - name: season
        type: integer
        required: true
        description: Season year
        min: 2000
        max: 2030

      - name: team
        type: integer
        required: false
        description: Filter by team ID
        min: 1

    validation:
      requiredParams: [league, season]

    paging:
      supported: false

    caching:
      policy: hourly
      ttl: 3600
      description: Standings updated after each match, hourly is reasonable

    response:
      rootPath: response
      type: array
      flatten:
        prefix: ""
        nestedObjects:
          - path: team
            strategy: flatten
            prefix: team_
          - path: all
            strategy: flatten
            prefix: all_
          - path: home
            strategy: flatten
            prefix: home_
          - path: away
            strategy: flatten
            prefix: away_

    metadata:
      apiTier: free
      quotaWeight: 1

    examples:
      - title: Get Premier League standings
        params:
          league: 39
          season: 2024

  # ==========================================
  # TEAM STATISTICS
  # ==========================================
  - id: team_statistics
    path: /teams/statistics
    category: Teams
    subcategory: Statistics
    description: Get detailed statistics for a team in a league/season
    keywords: [stats, performance, metrics]

    params:
      - name: league
        type: integer
        required: true
        description: League ID
        min: 1

      - name: season
        type: integer
        required: true
        description: Season year
        min: 2000
        max: 2030

      - name: team
        type: integer
        required: true
        description: Team ID
        min: 1

    validation:
      requiredParams: [league, season, team]

    paging:
      supported: false

    caching:
      policy: hourly
      ttl: 3600
      description: Statistics updated after matches

    response:
      rootPath: response
      type: object
      flatten:
        prefix: ""
        nestedObjects:
          - path: team
            strategy: flatten
            prefix: team_
          - path: league
            strategy: flatten
            prefix: league_
          - path: form
            strategy: flatten
            prefix: form_
          - path: fixtures
            strategy: flatten
            prefix: fixtures_
          - path: goals
            strategy: json
          - path: biggest
            strategy: json
          - path: clean_sheet
            strategy: flatten
            prefix: clean_sheet_
          - path: failed_to_score
            strategy: flatten
            prefix: failed_to_score_
          - path: penalty
            strategy: json
          - path: lineups
            strategy: json
          - path: cards
            strategy: json

    metadata:
      apiTier: free
      quotaWeight: 1

    examples:
      - title: Get Liverpool statistics for Premier League 2024
        params:
          league: 39
          season: 2024
          team: 40

  # ==========================================
  # PLAYERS (Top Scorers)
  # ==========================================
  - id: players_top_scorers
    path: /players/topscorers
    category: Players
    subcategory: Leaders
    description: Get top goal scorers for a league and season
    keywords: [scorers, goals, leaders]

    params:
      - name: league
        type: integer
        required: true
        description: League ID
        min: 1

      - name: season
        type: integer
        required: true
        description: Season year
        min: 2000
        max: 2030

    validation:
      requiredParams: [league, season]

    paging:
      supported: false

    caching:
      policy: hourly
      ttl: 3600
      description: Updated after matches

    response:
      rootPath: response
      type: array
      flatten:
        prefix: ""
        nestedObjects:
          - path: player
            strategy: flatten
            prefix: player_
          - path: statistics[0].team
            strategy: flatten
            prefix: team_
          - path: statistics[0].league
            strategy: flatten
            prefix: league_
          - path: statistics[0].games
            strategy: flatten
            prefix: games_
          - path: statistics[0].goals
            strategy: flatten
            prefix: goals_
          - path: statistics[0].shots
            strategy: flatten
            prefix: shots_

    metadata:
      apiTier: free
      quotaWeight: 1

    examples:
      - title: Get Premier League top scorers 2024
        params:
          league: 39
          season: 2024

  # ==========================================
  # ODDS (Pre-match)
  # ==========================================
  - id: odds_prematch
    path: /odds
    category: Odds
    subcategory: Pre-match
    description: Get pre-match betting odds for fixtures
    keywords: [betting, predictions, bookmakers]

    params:
      - name: fixture
        type: integer
        required: false
        description: Specific fixture ID
        min: 1

      - name: league
        type: integer
        required: false
        description: League ID
        min: 1

      - name: season
        type: integer
        required: false
        description: Season year
        min: 2000
        max: 2030

      - name: bet
        type: integer
        required: false
        description: Bet type ID (e.g., 1 for Match Winner)
        min: 1

    validation:
      requiresAtLeastOneOf: [fixture, league]
      conditionalRequired:
        - when: league
          equals: "*"
          then: [season]

    paging:
      supported: true
      paramName: page
      defaultPageSize: 25

    caching:
      policy: live
      ttl: 600
      description: Odds change frequently before kickoff

    response:
      rootPath: response
      type: array
      flatten:
        prefix: ""
        nestedObjects:
          - path: fixture
            strategy: flatten
            prefix: fixture_
          - path: league
            strategy: flatten
            prefix: league_
        nestedArrays:
          - path: bookmakers
            strategy: stringify

    metadata:
      apiTier: basic
      quotaWeight: 2

    examples:
      - title: Get odds for specific fixture
        params:
          fixture: 12345
