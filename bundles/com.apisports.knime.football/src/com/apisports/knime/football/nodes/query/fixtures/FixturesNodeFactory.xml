<?xml version="1.0" encoding="UTF-8"?>
<knimeNode icon="./Carovex.png" type="Manipulator"
    xmlns="http://knime.org/node/v4.1"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://knime.org/node/v4.1 http://knime.org/node/v4.1.xsd">

    <name>Fixtures</name>

    <shortDescription>
        Query fixtures from the Football API
    </shortDescription>

    <fullDescription>
        <intro>
            <p>
            Queries comprehensive fixture data (matches/games) from the Football API. This node can work
            in two modes:
            </p>
            <ul>
                <li><b>Standalone mode:</b> Uses dialog settings to query fixtures by league, date range, team, etc.</li>
                <li><b>Details mode:</b> Connects to Fixtures Selector output to retrieve detailed data for
                    specific fixtures (statistics, lineups, player stats, events).</li>
            </ul>
            <p>
            In Details mode, the third optional input port accepts a table with a Fixture_ID column
            (typically from Fixtures Selector). This allows you to browse/filter fixtures in the selector,
            then retrieve comprehensive details for only the selected fixtures.
            </p>
            <p>
            The node supports multiple query types including by league, date range, team, fixture ID,
            live fixtures, and head-to-head comparisons. Optionally includes detailed statistics, lineups,
            player stats, and match events.
            </p>
        </intro>

        <option name="Query Type">
            Select how to query fixtures:
            <ul>
                <li><b>By League/Season:</b> Get all fixtures for a specific league and season</li>
                <li><b>By Date Range:</b> Get fixtures within a date range</li>
                <li><b>By Team:</b> Get all fixtures for a specific team in a season</li>
                <li><b>By Fixture ID:</b> Get details for a specific fixture</li>
                <li><b>Live Fixtures:</b> Get all currently live fixtures</li>
                <li><b>Head to Head:</b> Compare past encounters between two teams</li>
            </ul>
        </option>

        <option name="League">
            Select the league to query. Populated from reference data input.
        </option>

        <option name="Season">
            Select the season year. Populated from reference data input.
        </option>

        <option name="Team">
            Optional team filter. Leave blank to get fixtures for all teams in the league.
        </option>

        <option name="From Date / To Date">
            For date range queries, specify the date range in YYYY-MM-DD format.
            To date is optional.
        </option>

        <option name="Fixture ID">
            For fixture ID queries, specify the numeric fixture ID.
        </option>

        <option name="Status Filter">
            Optional filter by fixture status (NS=Not Started, FT=Finished, LIVE=In Progress, etc.).
        </option>

        <option name="Include Additional Data">
            Optionally include events, lineups, or statistics in the query.
            Note: This may increase API response time and data volume.
        </option>
    </fullDescription>

    <ports>
        <inPort index="0" name="API Connection">
            API-Sports connection from the API-Connector node
        </inPort>
        <inPort index="1" name="Reference Data">
            Reference data (leagues, seasons, teams) from the Reference Data Loader node
        </inPort>
        <inPort index="2" name="Fixture IDs (Optional)">
            Optional input table containing a Fixture_ID column. When connected, the node retrieves
            detailed data for the specified fixtures, ignoring dialog query settings. This is typically
            used with output from Fixtures Selector node after filtering.
        </inPort>
        <outPort index="0" name="Fixtures">
            Table containing comprehensive fixture data. Column count varies based on "Include Additional Data"
            settings: 39 base columns (fixture, league, teams, scores), plus optional columns for events (18),
            statistics (32), lineups (20), and player stats (28). When input port is connected, retrieves
            detailed data for the specified Fixture IDs.
        </outPort>
    </ports>
</knimeNode>
